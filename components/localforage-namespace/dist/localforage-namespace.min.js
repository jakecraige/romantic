/*! localforage-namespace by Jake Craige 2014-03-14 */
!function(a){"use strict";a.namespace=function(b){var c=b;return{namespace:function(){return c},_namespacedKey:function(a){return this.namespace()+":"+a},_includes:function(a,b){var c;for(c=0;c<a.length;c++)if(a[c]===b)return!0;return!1},_addToKeysCache:function(b){var c=this;return a.getItem(this._namespacedKey("keysCache"),function(d){d||(d=[]),c._includes(d,b)||(d.push(b),a.setItem(c._namespacedKey("keysCache"),d))})},_getKeysCache:function(b){return a.getItem(this._namespacedKey("keysCache"),b)},_delegateMethod:function(b,c){var d=[].slice.call(arguments);return new Promise(function(e){c?a[b].apply(null,d.slice(2)):a[b].apply(null,d.slice(2)).then(e)})},setItem:function(a,b,c){var d=this._namespacedKey(a);return this._addToKeysCache(a),this._delegateMethod("setItem",c,d,b)},getItem:function(a,b){return this._delegateMethod("getItem",b,this._namespacedKey(a),value)},removeItem:function(a,b){return this._delegateMethod("removeItem",b,this._namespacedKey(a))},key:function(a,b){return this._delegateMethod("key",b,this._namespacedKey(a))},clear:function(a){var b=this;return new Promise(function(c){b._getKeysCache(function(d){var e=d.map(function(a){return b.removeItem(a)}).push(b.removeItem("keysCache"));Promise.all(e).then(function(){a&&a(!0),c(!0)}).catch(function(){a&&a(!1),c(!1)})})})},length:function(a){var b=this;return new Promise(function(c){b._getKeysCache(function(b){b||(b=[]),a&&a(b.length),c(b.length)})})}}}}(localforage);